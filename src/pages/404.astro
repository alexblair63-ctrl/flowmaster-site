---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Page Not Found">
  <!-- Invite-specific 404 (hidden by default, shown via JS if path matches) -->
  <section id="invite-404" class="section-padding pt-32" style="display: none;">
    <div class="container-main text-center">
      <p class="text-6xl mb-6">ðŸ˜•</p>
      <h1 class="mb-4">Whoops, that invite link didn't seem to work.</h1>
      <p class="text-xl text-gray-400 max-w-md mx-auto mb-8">
        The link may have been typed incorrectly, or you might need to ask for a new one.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a id="try-invite-btn" href="/invite/" class="btn-primary">Try Again</a>
        <a href="/" class="btn-secondary">Visit Flowmaster</a>
      </div>
    </div>
  </section>

  <!-- Generic 404 -->
  <section id="generic-404" class="section-padding pt-32">
    <div class="container-main text-center">
      <p class="text-8xl font-bold text-gradient mb-6">404</p>
      <h1 class="mb-4">Page Not Found</h1>
      <p class="text-xl text-gray-400 max-w-md mx-auto mb-8">
        The page you're looking for doesn't exist or has been moved.
      </p>
      <a href="/" class="btn-primary">Back to Home</a>
    </div>
  </section>

  <script is:inline>
    (function() {
      var path = window.location.pathname;
      if (path.startsWith('/invite/')) {
        var code = path.replace('/invite/', '').replace(/\/$/, '');
        // Show invite 404, hide generic 404
        document.getElementById('invite-404').style.display = 'block';
        document.getElementById('generic-404').style.display = 'none';
        // Wire up "Try Again" to pass the code as a query param
        if (code) {
          document.getElementById('try-invite-btn').href = '/invite/?code=' + encodeURIComponent(code);
        }
      }
    })();
  </script>
</BaseLayout>
